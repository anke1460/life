<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>个人信息</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="../css/mui.min.css">
		<link rel="stylesheet" type="text/css" href="../css/style.css" />
		<link rel="stylesheet" type="text/css" href="../css/mui.picker.css" />
		<link rel="stylesheet" type="text/css" href="../css/mui.poppicker.css" />
		<style>
			#avatar {
				height: 60px;
				line-height: 60px;
				display: block;
				background: #ccc;
				width: 60px;
				border-radius: 30px;
				text-align: center;
				color: red;
				font-size: 30px;
			}
			
			label {
				color: #444;
			}
			
			.mui-table-view-cell span {
				color: #888;
			}
			
			#sign {
				position: absolute;
				left: 90px;
				right: 65px;
				top: 10px;
				display: block;
				text-align: right;
			}
			
			.mui-table-view:before,
			.mui-table-view:after {
				background: none;
			}
		</style>
	</head>

	<body>
		<div class="mui-content">
			<ul class="mui-table-view mui-table-view-chevron">
				<li class="mui-table-view-cell">
					<a class="mui-navigate-right" id="upload_avatar">
						<label style="line-height: 60px;">头像</label>
						<div id="avatar" class="mui-pull-right">
						</div>
					</a>
				</li>
			</ul>
			<ul class="mui-table-view mui-table-view-chevron" style="margin-top: 15px;">
				<li class="mui-table-view-cell">
					<a class="mui-navigate-right" id="user_name">
						<label>昵称</label>
						<span class="mui-pull-right" id="name">
					   </span>
					</a>
				</li>
				<li class="mui-table-view-cell">
					<a class="mui-navigate-right" id="sex_select">
						<label>性别</label>
						<span class="mui-pull-right" id="sex">
					   	未填写
					   </span>
					</a>
				</li>
				<li class="mui-table-view-cell">
					<a class="mui-navigate-right" id="age_select">
						<label>出生日期</label>
						<span class="mui-pull-right" id="age">
					   	未填写
					   </span>
					</a>
				</li>
				<li class="mui-table-view-cell">
					<a class="mui-navigate-right" id="my_sign">
						<label>我的签名</label>
						<span class="mui-pull-right mui-ellipsis" id="sign">
					   	未填写
					   </span>
					</a>
				</li>
				<li class="mui-table-view-cell">
					<a class="mui-navigate-right">
						<label>我的头衔</label>
						<span class="mui-pull-right mui-ellipsis" id="rank">
					   未填写
					   </span>
					</a>
				</li>
			</ul>
			<ul class="mui-table-view mui-table-view-chevron" style="margin-top: 15px;">
				<li class="mui-table-view-cell">
					<a class="mui-navigate-right" id="hometown_select">
						<label>家乡</label>
						<span class="mui-pull-right" id="hometown">
					   	未填写
					   </span>
					</a>
				</li>
				<li class="mui-table-view-cell">
					<a class="mui-navigate-right" id="place_select">
						<label>常住地</label>
						<span class="mui-pull-right" id="place">
					   	未填写
					   </span>
					</a>
				</li>
			</ul>
		</div>
	</body>
	<script src="../js/mui.min.js"></script>
	<script src="../js/service.js" type="text/javascript" charset="utf-8"></script>
	<script src="../js/mui.picker.js" type="text/javascript" charset="utf-8"></script>
	<script src="../js/mui.poppicker.js" type="text/javascript" charset="utf-8"></script>
	<script src="../js/city_data.js" type="text/javascript" charset="utf-8"></script>
	<script src="../js/user/photo.js" type="text/javascript" charset="utf-8"></script>
	<script>
		mui.init({
			swipeBack: true //启用右滑关闭功能
		});
		mui.plusReady(function() {
			you.dom("avatar").innerText = you.getStore("name").slice(0, 1);
			you.dom("name").innerText = you.getStore("name");
		});
		you.dom("user_name").addEventListener("tap", function() {
			mui.openWindow({
				url: 'user_name.html',
				id: "user_name",
				styles: {
					aniShow: 'pop-in'
				}
			});
		});
		you.dom("sex_select").addEventListener("tap", function() {
			var actionbuttons = [{
				title: "男"
			}, {
				title: "女"
			}];
			var actionstyle = {
				title: "选择性别",
				buttons: actionbuttons
			};
			plus.nativeUI.actionSheet(actionstyle, function(e) {
				you.dom("sex").innerText = {
					1: "男",
					2: "女"
				}[e.index];
			});
		});
		you.dom("age_select").addEventListener("tap", function() {
			var d = new Date();
			d.setFullYear(1949, 0, 1);
			plus.nativeUI.pickDate(function(e) {
					var birder = e.date;
					you.dom("age").innerText = birder.getFullYear() + "-" + (birder.getMonth() + 1) + "-" + birder.getDate();
				},
				mui.noop, {
					minDate: d,
					maxDate: new Date()
				});
		});
		you.dom("my_sign").addEventListener("tap", function() {
			mui.openWindow({
				url: 'sign.html',
				id: "sign",
				styles: {
					aniShow: 'pop-in'
				}
			});
		});
		window.addEventListener("set_sign", function(e) {
			you.dom("sign").innerText = e.detail.name;
		});
		you.dom("rank").addEventListener("tap", function() {
			mui.openWindow({
				url: 'rank.html',
				id: "rank",
				styles: {
					aniShow: 'pop-in'
				}
			});
		});
		mui.ready(function() {
			var hometown_pop = new mui.PopPicker({
				layer: 2
			});
			hometown_pop.setData(cityData);
			var hometown_select = document.getElementById('hometown_select');
			var hometown = document.getElementById('hometown');
			hometown_select.addEventListener('tap', function(event) {
				hometown_pop.show(function(items) {
					hometown.innerText = items[1].text ? (items[0].text + items[1].text) : '未填写';
				});
			}, false);
			var place_pop = new mui.PopPicker({
				layer: 2
			});
			place_pop.setData(cityData);
			var place_select = document.getElementById('place_select');
			var place = document.getElementById('place');
			place_select.addEventListener('tap', function(event) {
				place_pop.show(function(items) {
					place.innerText = items[1].text ? (items[0].text + items[1].text) : '未填写';
				});
			}, false);
		});
		
		document.getElementById("upload_avatar").addEventListener("tap", function() {
			console.log(233)
			you.popActionSheet("上传头像", {}, function(result) {
			});
		})
	</script>

</html>